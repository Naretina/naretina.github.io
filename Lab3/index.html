<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<style>
	.scatter {
		width: 500px;
		height: 500px;
		border: 1px solid grey
	}
	</style>
	<script src="https://d3js.org/d3.v7.min.js"></script>
	<script>
		async function loadData() {
			return await d3.json("GlobalTemperatures.json");
		}
	</script>
	<title>D3 Scatterplots</title>
</head>
<body>
	<div id="scatterplot_1" class="scatter">
		<script>
			// Loading in the data for the first plot
			const data = loadData();
			console.log(data);

			// Setting up the canvas and its boundaries
			const margin = {
				top: 10,
				right: 30,
				bottom: 30,
				left: 60
			},
			canvasWidth = 500 - margin.left - margin.right,
			canvasHeight = 500 - margin.top - margin.bottom;

			const canvas = d3
				.select("#scatterplot_1")
				.append("svg")
				.attr("width", 500)
				.attr("height", 500);

			// Adding the x-axis
			const x = d3
				.scaleTime()
				.domain([new Date("1850-01-01"), new Date("2015-12-01")])
				.range([60, canvasWidth+60]);
			const xAxis = canvas
				.append("g")
				.attr("transform", "translate(0," + canvasHeight + ")")
				.call(d3.axisBottom(x));

			// Adding the y-axis
			const y = d3
				.scaleLinear()
				.domain([10, 20])
				.range([canvasHeight, 5]);
			const yAxis = canvas
				.append("g")
				.attr("transform", "translate(60, 0)")
				.call(d3.axisLeft(y));

			// Adding LAT points
			var firstPoints = canvas
				.append("g")
				.attr("id", "chart1")
				.selectAll("dot")
				.data(data)
				.join("circle")
				.attr("cx", function(d, i) {
					// TODO: Fix cx
					console.log(parseTime(d.time)); // This is what normally executes.
					return x(d.time);
				})
				.attr("cy", function(d, i) {
					return y(+d.LAT);
				})
				.attr("r", 3); // Change later.
		</script>
	</div>
</body>
</html>
